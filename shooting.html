<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>3D Shooting Game</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
	<style>
		body { margin: 0; overflow: hidden; background: #181f2a; }
		#score {
			position: absolute;
			top: 20px;
			left: 50%;
			transform: translateX(-50%);
			color: #4cffc8;
			font-size: 2rem;
			font-family: 'Segoe UI', Arial, sans-serif;
			background: rgba(24,31,42,0.8);
			padding: 0.5rem 2rem;
			border-radius: 1rem;
			z-index: 10;
		}
		#crosshair {
			position: absolute;
			left: 50%;
			top: 50%;
			width: 32px;
			height: 32px;
			margin-left: -16px;
			margin-top: -16px;
			pointer-events: none;
			z-index: 10;
		}
	</style>
</head>
<body>
	<div id="score">Score: 0</div>
	<svg id="crosshair" viewBox="0 0 32 32">
		<circle cx="16" cy="16" r="8" stroke="#4cffc8" stroke-width="2" fill="none"/>
		<line x1="16" y1="0" x2="16" y2="8" stroke="#4cffc8" stroke-width="2"/>
		<line x1="16" y1="24" x2="16" y2="32" stroke="#4cffc8" stroke-width="2"/>
		<line x1="0" y1="16" x2="8" y2="16" stroke="#4cffc8" stroke-width="2"/>
		<line x1="24" y1="16" x2="32" y2="16" stroke="#4cffc8" stroke-width="2"/>
	</svg>
	<script>
	// --- Three.js 3D Shooting Game ---
	let scene, camera, renderer, raycaster, mouse;
	let targets = [];
	let score = 0;
	const scoreDiv = document.getElementById('score');

	// Setup scene
	scene = new THREE.Scene();
	scene.background = new THREE.Color(0x181f2a);

	// Camera
	camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
	camera.position.set(0, 2, 10);

	// Renderer
	renderer = new THREE.WebGLRenderer({antialias: true});
	renderer.setSize(window.innerWidth, window.innerHeight);
	document.body.appendChild(renderer.domElement);

	// Light
	const light = new THREE.DirectionalLight(0xffffff, 1);
	light.position.set(5, 10, 7.5);
	scene.add(light);
	scene.add(new THREE.AmbientLight(0x404040, 1.5));

	// Floor
	const floorGeo = new THREE.PlaneGeometry(50, 50);
	const floorMat = new THREE.MeshStandardMaterial({color: 0x26352c});
	const floor = new THREE.Mesh(floorGeo, floorMat);
	floor.rotation.x = -Math.PI/2;
	floor.position.y = -1;
	scene.add(floor);

	// Raycaster for shooting
	raycaster = new THREE.Raycaster();
	mouse = new THREE.Vector2();

	// Create targets
	function spawnTarget() {
		const geometry = new THREE.SphereGeometry(0.5, 32, 32);
		const color = new THREE.Color().setHSL(Math.random(), 0.7, 0.5);
		const material = new THREE.MeshStandardMaterial({color: color});
		const target = new THREE.Mesh(geometry, material);
		// Random position in front of camera
		target.position.set(
			(Math.random() - 0.5) * 8,
			Math.random() * 4 + 1,
			-Math.random() * 10 - 5
		);
		target.userData = { speed: Math.random() * 0.02 + 0.01 };
		scene.add(target);
		targets.push(target);
	}

	for (let i = 0; i < 5; i++) spawnTarget();

	// Shooting logic
	function shoot() {
		// Always shoot from center of screen
		mouse.x = 0;
		mouse.y = 0;
		raycaster.setFromCamera(mouse, camera);
		const intersects = raycaster.intersectObjects(targets);
		if (intersects.length > 0) {
			// Remove the first hit target
			const hit = intersects[0].object;
			scene.remove(hit);
			targets = targets.filter(t => t !== hit);
			score++;
			scoreDiv.textContent = 'Score: ' + score;
			// Spawn a new target
			spawnTarget();
		}
	}

	window.addEventListener('mousedown', shoot);

	// Animate targets
	function animateTargets() {
		for (let t of targets) {
			t.position.z += t.userData.speed;
			t.position.x += Math.sin(Date.now() * 0.001 + t.position.y) * 0.01;
			if (t.position.z > 5) {
				// Missed target, reset
				t.position.set(
					(Math.random() - 0.5) * 8,
					Math.random() * 4 + 1,
					-Math.random() * 10 - 5
				);
			}
		}
	}

	// Handle resize
	window.addEventListener('resize', () => {
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize(window.innerWidth, window.innerHeight);
	});

	// Main loop
	function animate() {
		requestAnimationFrame(animate);
		animateTargets();
		renderer.render(scene, camera);
	}
	animate();
	</script>
</body>
</html>
